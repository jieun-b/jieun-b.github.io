---
title: "[백준] 17144번: 미세먼지 안녕!"
date: 2025-10-29 00:00:00 +0900
layout: post
tags: [구현, 시뮬레이션]
---
## 문제

[17144**번: 미세먼지 안녕!**](https://www.acmicpc.net/problem/17144)

### 문제 요약

`r × c` 격자에 미세먼지(`양수`)와 공기청정기(`-1`)가 존재

매 초마다 두 단계 진행:

1. **미세먼지 확산**
    - 미세먼지는 상하좌우로 확산
    - 인접한 칸이 벽이 아니면 `((r, c)의 먼지량 // 5)` 만큼 확산
    - `(r, c)`에 남은 먼지량은 `((r, c)의 먼지량 // 5)*확산된 방향의 개수` 만큼 감소
    - 모든 칸이 동시에 확산
2. **공기청정기 작동**
    - 위쪽 공기청정기는 **반시계 방향**으로,
    - 아래쪽 공기청정기는 **시계 방향**으로 바람이 순환
    - 바람이 지나가는 칸의 먼지는 한 칸씩 이동하고,
    - 공기청정기로 들어간 미세먼지는 모두 정화됨

## 풀이 아이디어

### 1. 공기청정기 위치 탐색

- 공기청정기는 항상 첫 번째 열에 두 칸 연속으로 존재하므로 해당 좌표를 찾아 `air = [[top_i, 0], [bottom_i, 0]]` 형태로 저장

### 2. 미세먼지 확산

- 현재 상태 `cur`에서 다음 상태 `next`를 새로 만들어 시뮬레이션
- 각 칸에서 상하좌우로 확산 가능한 칸을 찾아 `(cur[i][j] // 5)` 만큼 옮기고, 남은 양은 `next[i][j]`에 더함
- 공기청정기 위치는 항상 `-1`로 유지

```python
if 0 <= ni < r and 0 <= nj < c and cur[ni][nj] != -1:
    next[ni][nj] += cur[i][j] // 5
```

### 3. 공기청정기 순환

- `air[0]`은 **반시계 방향**, `air[1]`은 **시계 방향**으로 순환
- 바람이 도는 경로를 따라 먼지를 한 칸씩 이동시킴
- 순환 루프의 마지막(공기청정기 옆)은 항상 0으로 초기화

**위쪽 반시계:** `→ 오른쪽 → 위쪽 → 왼쪽 → 아래쪽`

**아래쪽 시계:** `→ 오른쪽 → 아래쪽 → 왼쪽 → 위쪽` 

### 4. 전체 시뮬레이션

- T초 동안 `diffuse()` → `move()` 순서로 반복
- 매 반복마다 새로운 배열로 갱신

```python
for _ in range(t):
    a = diffuse(a)
    move(a)
```

## 코드

```python
import sys
input = sys.stdin.readline

r, c, t = map(int, input().split())
a = [list(map(int, input().split())) for _ in range(r)]

di = [0, 1, 0, -1]
dj = [1, 0, -1, 0]

# 공기청정기 위치 찾기
air = []
for i in range(r):
    if a[i][0] == -1:
        air.append([i, 0])
        air.append([i+1, 0])
        break

# 미세먼지 확산
def diffuse(cur):
    next = [[0]*c for _ in range(r)]
    next[air[0][0]][air[0][1]], next[air[1][0]][air[1][1]] = -1, -1
    for i in range(r):
        for j in range(c):
            if cur[i][j] > 0:
                count = 0
                for k in range(4):
                    ni = i + di[k]
                    nj = j + dj[k]
                    if 0 <= ni < r and 0 <= nj < c and cur[ni][nj] != -1:
                        next[ni][nj] += cur[i][j] // 5
                        count += 1
                next[i][j] += cur[i][j] - (cur[i][j] // 5) * count
    return next

# 공기청정기 바람 이동
def move(cur):
    top, bottom = air[0][0], air[1][0]
    
    # 위쪽 반시계
    for i in range(top-1, 0, -1):
        cur[i][0] = cur[i-1][0]
    for j in range(0, c-1):
        cur[0][j] = cur[0][j+1]
    for i in range(0, top):
        cur[i][c-1] = cur[i+1][c-1]
    for j in range(c-1, 1, -1):
        cur[top][j] = cur[top][j-1]
    cur[top][1] = 0
    
    # 아래쪽 시계
    for i in range(bottom+1, r-1):
        cur[i][0] = cur[i+1][0]
    for j in range(0, c-1):
        cur[r-1][j] = cur[r-1][j+1]
    for i in range(r-1, bottom, -1):
        cur[i][c-1] = cur[i-1][c-1]
    for j in range(c-1, 1, -1):
        cur[bottom][j] = cur[bottom][j-1]
    cur[bottom][1] = 0

# T초 동안 시뮬레이션
for _ in range(t):
    a = diffuse(a)
    move(a)

# 남은 미세먼지 양 합산 (공기청정기 칸은 제외)
total = sum(sum(cell for cell in row if cell > 0) for row in a)
print(total)
```