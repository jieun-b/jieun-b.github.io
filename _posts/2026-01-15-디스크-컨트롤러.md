---
title: "[프로그래머스] 코딩테스트 고득점 Kit – 디스크 컨트롤러"
date: 2026-01-15 20:00:00 +0900
layout: post
categories: [공부, Algorithm]
tags: [Heap]
---
## 문제

[Level3: 디스크 컨트롤러](https://school.programmers.co.kr/learn/courses/30/lessons/42627)

### 문제 요약

- 하드디스크는 한 번에 하나의 작업만 수행 가능
- 작업 요청은 `(요청 시각, 소요 시간)` 형태로 주어짐
- 작업 요청이 들어오면 대기 큐에 저장
- 하드디스크가 쉬고 있고 대기 큐가 비어있지 않다면, 우선순위가 가장 높은 작업을 꺼내 실행
    - 소요 시간이 짧은 작업
    - 요청 시각이 빠른 작업
    - (동률이면 작업 번호가 작은 것, 이 문제에서는 입력 순서로 보면 됨)
- 하드디스크는 작업을 시작하면 끝날 때까지 해당 작업만 수행
- 작업 종료 시점과 다른 작업 요청 시점이 겹치면, 종료 직후 요청 작업을 큐에 넣고 다음 작업을 선택 (오버헤드 0)
- 목표: 각 작업의 `완료 시각 - 요청 시각` 평균을 구해 정수 부분을 반환


## 풀이 아이디어

### 1. 우선순위 큐(힙)

- 대기 큐는 `heapq`로 구현
- 우선순위를 맞추기 위해 `[소요 시간, 요청 시각]` 형태로 push

### 2. 시간 시뮬레이션

- `now` : 현재 시각
- `prev` : 직전 작업을 시작하기 전 시각 (이미 큐에 넣은 요청을 구분하기 위함)
- 매 반복마다 `prev < 요청 시각 <= now` 인 작업을 큐에 넣음

### 3. 작업 수행

- 큐에 작업이 있으면 하나 pop해서 실행
    - `prev = now`
    - `now += 소요 시간`
    - `answer += (now - 요청 시각)` 누적
- 큐가 비어있으면 `now += 1` 로 시간만 진행

### 4. 평균 계산

- 모든 작업을 처리한 뒤 `answer // len(jobs)` 반환

## 코드


```python
import heapq
def solution(jobs):
    answer = 0
    queue = []
    now = 0
    prev = -1
    done = 0
    while done < len(jobs):
        # 현재 시점에서 큐에 넣을 수 있는 작업    
        for job in jobs:
            if prev < job[0] <= now:
                heapq.heappush(queue, [job[1], job[0]])
        # 큐에 있는 작업 실행
        if queue:
            long, start = heapq.heappop(queue)
            prev = now
            now += long
            answer += (now - start)
            done += 1
        else:
            now += 1
    return answer//len(jobs)
```